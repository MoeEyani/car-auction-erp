# ุฏููู ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ ููุงุนุฏุฉ ุจูุงูุงุช ERP

## ๐ **ูุนูููุงุช ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ ุงูุญุงููุฉ**

### **ุชูุงุตูู ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ:**
- **ุงูุชุงุฑูุฎ ูุงูููุช:** 2025-09-23 01:34:30
- **ูุงุนุฏุฉ ุงูุจูุงูุงุช:** erp_database  
- **ุงููุณุชุฎุฏู:** erp_user
- **ุฅุตุฏุงุฑ PostgreSQL:** 16.10
- **ุญุงููุฉ Docker:** erp_postgres_db

### **ุงููููุงุช ุงูููุดุฃุฉ:**
1. **ุงููุณุฎุฉ SQL ุงูุนุงุฏูุฉ:** `erp_database_backup_2025-09-23_01-34-30.sql` (46.2 KB)
2. **ุงููุณุฎุฉ ุงููุถุบูุทุฉ:** `erp_database_compressed_2025-09-23_01-34-41.dump` (57.4 KB)

---

## ๐ง **Scripts ุงููุชุงุญุฉ**

### **1. restore_database.ps1**
**ุงูุบุฑุถ:** ุงุณุชุนุงุฏุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ

**ุงูุงุณุชุฎุฏุงู:**
```powershell
# ุงุณุชุนุงุฏุฉ ูู ููู SQL
.\restore_database.ps1 -BackupFile "erp_database_backup_2025-09-23_01-34-30.sql"

# ุงุณุชุนุงุฏุฉ ูู ููู ูุถุบูุท
.\restore_database.ps1 -BackupFile "erp_database_compressed_2025-09-23_01-34-41.dump"
```

**ูุง ูููู ุจู:**
- ุฅููุงู ุฎุฏูุฉ Backend ูุคูุชุงู
- ุญุฐู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุญุงููุฉ
- ุฅูุดุงุก ูุงุนุฏุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ
- ุงุณุชุนุงุฏุฉ ุงูุจูุงูุงุช ูู ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ
- ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุฏูุงุช

### **2. daily_backup.ps1**
**ุงูุบุฑุถ:** ุฅูุดุงุก ูุณุฎ ุงุญุชูุงุทูุฉ ุชููุงุฆูุฉ ููููุฉ

**ุงูุงุณุชุฎุฏุงู:**
```powershell
# ูุณุฎ ุงุญุชูุงุทู ุนุงุฏู
.\daily_backup.ps1

# ุชุฎุตูุต ุงููุฌูุฏ ููุฏุฉ ุงูุงุญุชูุงุธ
.\daily_backup.ps1 -BackupPath "custom_backups" -RetentionDays 14
```

**ุงููููุฒุงุช:**
- ุฅูุดุงุก ูุณุฎุชูู (SQL ุนุงุฏู + ูุถุบูุท)
- ุชุณุฌูู ุณุฌู ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ
- ุชูุธูู ุงููุณุฎ ุงููุฏููุฉ ุชููุงุฆูุงู
- ุชูุงุฑูุฑ ููุตูุฉ ุนู ุงูุฃุญุฌุงู

---

## ๐ **ูุญุชููุงุช ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ**

### **ุงูุฌุฏุงูู ุงููุดูููุฉ:**
1. **ุฌุฏุงูู ุงููุธุงู:**
   - `permissions` (19 ุตูุงุญูุฉ)
   - `roles` (7 ุฃุฏูุงุฑ)
   - `role_permissions` (ุฑุจุท ุงูุฃุฏูุงุฑ ุจุงูุตูุงุญูุงุช)

2. **ุฌุฏุงูู ุงููุณุชุฎุฏููู:**
   - `users` (ุจูุงูุงุช ุงููุณุชุฎุฏููู)
   - `user_permission_overrides` (ุชุฌุงูุฒุงุช ุงูุตูุงุญูุงุช)

3. **ุฌุฏุงูู ุงููุฑูุน:**
   - `branches` (ุจูุงูุงุช ุงููุฑูุน)

4. **ุงูุฌุฏุงูู ุงููุณุงุนุฏุฉ:**
   - `_prisma_migrations` (ุชุงุฑูุฎ ุงูุชุญุฏูุซุงุช)

### **ุงูุจูุงูุงุช ุงููุญููุธุฉ:**
- **ุงูุตูุงุญูุงุช:** ุฌููุน ุงูุตูุงุญูุงุช ุงูู19 ูุน ุฃูุตุงููุง
- **ุงูุฃุฏูุงุฑ:** ุงูุฃุฏูุงุฑ ุงููุธุงููุฉ ูุงููุฎุตุตุฉ  
- **ุงููุณุชุฎุฏููู:** ุฌููุน ุญุณุงุจุงุช ุงููุณุชุฎุฏููู
- **ุฑุจุท ุงูุตูุงุญูุงุช:** ุนูุงูุงุช ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช
- **ุฅุนุฏุงุฏุงุช ุงููุฑูุน:** ุจูุงูุงุช ุงููุฑูุน ุงููุฎุชููุฉ

---

## โ๏ธ **ุฅุนุฏุงุฏ ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูุชููุงุฆู**

### **ุฌุฏููุฉ ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ ุงูููููุฉ:**

#### **Windows Task Scheduler:**
```powershell
# ุฅูุดุงุก ูููุฉ ุฌุฏููุฉ
$Action = New-ScheduledTaskAction -Execute "PowerShell.exe" -Argument "-File C:\Users\Moham\erp_project\backups\daily_backup.ps1"
$Trigger = New-ScheduledTaskTrigger -Daily -At "02:00"
$Settings = New-ScheduledTaskSettingsSet -AllowStartIfOnBatteries -DontStopIfGoingOnBatteries
Register-ScheduledTask -TaskName "ERP Database Backup" -Action $Action -Trigger $Trigger -Settings $Settings
```

#### **ุชุดุบูู ูุฏูู ููุชุธู:**
```powershell
# ุฅุถุงูุฉ ููููู ุงูุดุฎุตู PowerShell
echo 'Set-Alias backup-erp "C:\Users\Moham\erp_project\backups\daily_backup.ps1"' >> $PROFILE
```

---

## ๐ **ุฃูุถู ุงูููุงุฑุณุงุช ูููุณุฎ ุงูุงุญุชูุงุทูุฉ**

### **โ ุงูุชูุตูุงุช:**
1. **ูุณุฎ ุงุญุชูุงุทูุฉ ููุชุธูุฉ:** ููููุงู ูู ุงูุณุงุนุฉ 2:00 ุตุจุงุญุงู
2. **ุฃููุงุน ูุชุนุฏุฏุฉ:** SQL ุนุงุฏู + ูุถุบูุท ูููุฑููุฉ
3. **ูุชุฑุฉ ุงูุงุญุชูุงุธ:** 7-14 ููู ูููุณุฎ ุงูููููุฉ
4. **ูุณุฎ ุฃุณุจูุนูุฉ:** ุงุญุชูุงุธ ููุฏุฉ ุดูุฑ
5. **ูุณุฎ ุดูุฑูุฉ:** ุงุญุชูุงุธ ููุฏุฉ ุณูุฉ

### **๐ ููุงูุน ุงูุชุฎุฒูู:**
- **ูุญูู:** `C:\Users\Moham\erp_project\backups\`
- **ุณุญุงุจู:** Google Drive, OneDrive, AWS S3
- **ุฎุงุฑุฌู:** ูุฑุต ุตูุจ ุฎุงุฑุฌูุ NAS

### **๐ ุงูุฃูุงู:**
- ุชุดููุฑ ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ ุงูุญุณุงุณุฉ
- ุญูุงูุฉ ูููุงุช ุงููุฑูุฑ
- ุงูุชุญูู ูู ุณูุงูุฉ ุงููุณุฎ ุฏูุฑูุงู

---

## ๐จ **ุฎุทุฉ ุงูุทูุงุฑุฆ**

### **ูู ุญุงูุฉ ูุดู ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
1. **ุงูุชูููู:** ุชุญุฏูุฏ ูุณุชูู ุงูุถุฑุฑ
2. **ุงูุฅููุงู:** ุฅููุงู ุฌููุน ุงูุฎุฏูุงุช
3. **ุงูุงุณุชุนุงุฏุฉ:** ุงุณุชุฎุฏุงู ุฃุญุฏุซ ูุณุฎุฉ ุงุญุชูุงุทูุฉ
4. **ุงูุชุญูู:** ุงุฎุชุจุงุฑ ุณูุงูุฉ ุงูุจูุงูุงุช
5. **ุฅุนุงุฏุฉ ุงูุชุดุบูู:** ุชุดุบูู ุงููุธุงู ูุงูุงุฎุชุจุงุฑ

### **ุงุฎุชุจุงุฑ ุงูุงุณุชุนุงุฏุฉ:**
```powershell
# ุงุฎุชุจุงุฑ ุดูุฑู ููุงุณุชุนุงุฏุฉ
.\restore_database.ps1 -BackupFile "test_backup.sql"
```

---

## ๐ **ูุฑุงูุจุฉ ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ**

### **ุณุฌู ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ:**
```powershell
# ุนุฑุถ ุขุฎุฑ 10 ูุณุฎ ุงุญุชูุงุทูุฉ
Get-Content "backups/backup_log.json" | ConvertFrom-Json | Select-Object -Last 10
```

### **ูุญุต ุตุญุฉ ุงููุณุฎ:**
```powershell
# ูุญุต ุฃุญุฌุงู ุงููููุงุช
Get-ChildItem backups\*.sql | Select-Object Name, Length, LastWriteTime
```

### **ุฅุญุตุงุฆูุงุช ุงูุงุณุชุฎุฏุงู:**
- **ูุชูุณุท ุญุฌู ุงููุณุฎุฉ:** ~46 KB (SQL) / ~57 KB (ูุถุบูุท)
- **ููุช ุงูุฅูุดุงุก:** ุฃูู ูู ุฏูููุฉ
- **ูุณุงุญุฉ ูุทููุจุฉ:** ~100 KB ููููุงู

---

## ๐ฏ **ุฎูุงุตุฉ ุงูุฃูุงูุฑ ุงูุณุฑูุนุฉ**

```powershell
# ุฅูุดุงุก ูุณุฎุฉ ุงุญุชูุงุทูุฉ ููุฑูุฉ
.\daily_backup.ps1

# ุงุณุชุนุงุฏุฉ ูู ุขุฎุฑ ูุณุฎุฉ
.\restore_database.ps1 -BackupFile "erp_database_backup_2025-09-23_01-34-30.sql"

# ุนุฑุถ ุณุฌู ุงููุณุฎ
Get-Content "backups/backup_log.json" | ConvertFrom-Json

# ุนุฑุถ ุงููุณุฎ ุงููุชุงุญุฉ
Get-ChildItem backups\erp_database_* | Sort-Object LastWriteTime -Descending
```

ุงููุธุงู ุงูุขู ูุญูู ุจูุณุฎ ุงุญุชูุงุทูุฉ ุดุงููุฉ ูููุซููุฉ! ๐ก๏ธ